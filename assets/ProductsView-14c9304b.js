import{f as V,g as T,m as g,a as u,_ as h,o as r,c as a,b as e,F as v,j as k,n as I,k as E,t as l,r as p,l as S,d as _,w,p as b,e as P}from"./index-6fd02e4d.js";import{T as A}from"./Toast-8690d0f6.js";import{s as f}from"./statusStore-6119fa29.js";import{c as x}from"./cartStore-9e6066c3.js";const m=f(),{VITE_API:B,VITE_PATH:D}={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"coffee11",BASE_URL:"/cafe_backend/",MODE:"production",DEV:!1,PROD:!0},c=V("products",{state:()=>({products:[],categories:["全部商品","淺焙咖啡","中焙咖啡","深焙咖啡","周邊商品"],filterCategory:"全部商品"}),actions:{getProducts(){m.isLoading=!0,T.get(`${B}/api/${D}/products/all`).then(t=>{m.isLoading=!1;const{products:o}=t.data;this.products=o}).catch(t=>{var i,d;m.isLoading=!1;const o=((d=(i=t.response)==null?void 0:i.data)==null?void 0:d.message)||"資料取得失敗，稍後在試";A.fire({title:`${o}`,icon:"error"})})},changeCategory(t){this.filterCategory=t}},getters:{filterProducts:t=>t.products.filter(i=>t.filterCategory==="全部商品"?t.products:i.category===t.filterCategory)}}),N={data(){return{}},methods:{...g(c,["changeCategory"])},computed:{...u(c,["categories","filterCategory"])}},z={class:"col-md-2 mb-2 my-5"},M={class:"list-group sticky-top"},U=["onClick"];function F(t,o,i,d,y,$){return r(),a("div",z,[e("ul",M,[(r(!0),a(v,null,k(t.categories,n=>(r(),a("li",{class:I(["list-group-item",{active:n===t.filterCategory}]),key:n,onClick:E(s=>t.changeCategory(n),["prevent"])},l(n),11,U))),128))])])}const H=h(N,[["render",F]]),O={data(){return{}},methods:{...g(c,["getProducts"]),...g(x,["addToCart"])},computed:{...u(c,["products","filterProducts"]),...u(f,["isLoading","loadingItem","isProcessing"])},mounted(){this.getProducts()}},R={class:"col-md-10 my-5"},j={class:"row"},q={class:"card border-0 shadow-sm h-100"},G={class:"card-body"},J={class:"badge bg-primary float-right ml-2"},K={class:"card-title"},Q={href:"#",class:"text-dark"},W={class:"card-text"},X={class:"text-right pr-2"},Y={class:"card-footer d-flex"},Z={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},tt=["onClick"],et={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"};function st(t,o,i,d,y,$){const n=p("router-link");return r(),a("div",R,[e("div",j,[(r(!0),a(v,null,k(t.filterProducts,s=>(r(),a("div",{class:"col-md-4 col-sm-6 mb-3 mb-4",key:s.id},[e("div",q,[e("div",{style:S([{height:"170px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${s.imageUrl})`}])},null,4),e("div",G,[e("span",J,l(s.category),1),e("h5",K,[e("a",Q,l(s.title),1)]),e("p",W,l(s.description),1),e("div",X,l(s.price)+" 元",1)]),e("div",Y,[_(n,{to:`/product/${s.id}`,class:"btn btn-outline-primary btn-sm"},{default:w(()=>[t.isProcessing?(r(),a("span",Z)):b("",!0),P(" 查看更多 ")]),_:2},1032,["to"]),e("button",{type:"button",class:"btn btn-primary btn-sm ms-auto",onClick:C=>t.addToCart(s.id)},[s.id===t.loadingItem?(r(),a("span",et)):b("",!0),P(" 加到購物車 ")],8,tt)])])]))),128))])])}const ot=h(O,[["render",st]]),rt={data(){return{}},components:{ProductCategory:H,ProductList:ot},methods:{...g(c,["getProducts","changeCategory"])},computed:{...u(c,["products","categories","filterProducts","filterCategory"]),...u(f,["isLoading","loadingItem"])},mounted(){this.getProducts()}},at={class:"container"},nt={class:"row"};function it(t,o,i,d,y,$){const n=p("VueLoading"),s=p("ProductCategory"),C=p("ProductList");return r(),a("div",at,[_(n,{active:t.isLoading,"onUpdate:active":o[0]||(o[0]=L=>t.isLoading=L)},null,8,["active"]),e("div",nt,[_(s),_(C)])])}const pt=h(rt,[["render",it]]);export{pt as default};
